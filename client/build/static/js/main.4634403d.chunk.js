(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,n){e.exports=n.p+"static/media/vip.009911f9.png"},36:function(e,t,n){e.exports=n(67)},42:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(31),l=n.n(o),c=n(5),s=(n(41),n(42),n(7)),i=n(8),u=n(10),m=n(9),p=n(11),h=n(12),d=n(32),f=n.n(d),g=n(17),b=n.n(g),v=f.a.create();v.getToken=function(){return localStorage.getItem("token")},v.setToken=function(e){return localStorage.setItem("token",e),e},v.getCurrentUser=function(){var e=this.getToken();return e?b()(e):null},v.logIn=function(e){var t=this;return this({method:"post",url:"/api/users/authenticate",data:e}).then(function(e){var n=e.data.token;return!!n&&(t.defaults.headers.common.token=t.setToken(n),b()(n))})},v.signUp=function(e){var t=this;return this({method:"post",url:"/api/users",data:e}).then(function(e){var n=e.data.token;return!!n&&(console.log("signup"),console.log(t.defaults),t.defaults.headers.common.token=t.setToken(n),console.log(t.defaults),b()(n))})},v.logOut=function(){return localStorage.removeItem("token"),delete this.defaults.headers.common.token,!0},v.defaults.headers.common.token=v.getToken();var E=v,O=function(e){return r.a.createElement("div",{className:"NavBar"},r.a.createElement(c.b,{to:"/"},"Home"),e.currentUser?r.a.createElement("span",null,r.a.createElement(c.b,{to:"/machine"},"Machine"),r.a.createElement(c.b,{to:"/logout"},"Log Out")):r.a.createElement("span",null,r.a.createElement(c.b,{to:"/login"},"Log In"),r.a.createElement(c.b,{to:"/signup"},"Sign Up")))},S=n(14),k=n(16),j=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={fields:{email:"",password:""}},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"onInputChange",value:function(e){this.setState({fields:Object(k.a)({},this.state.fields,Object(S.a)({},e.target.name,e.target.value))})}},{key:"onFormSubmit",value:function(e){var t=this;e.preventDefault(),E.logIn(this.state.fields).then(function(e){t.setState({fields:{email:"",password:""}}),e&&(t.props.onLoginSuccess(e),t.props.history.push("/"))})}},{key:"render",value:function(){var e=this.state.fields,t=e.email,n=e.password;return r.a.createElement("div",{className:"LogIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column column-33 column-offset-33"},r.a.createElement("h1",null,"Log In"),r.a.createElement("form",{onChange:this.onInputChange.bind(this),onSubmit:this.onFormSubmit.bind(this)},r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",value:t}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",value:n}),r.a.createElement("button",null,"Log In")))))}}]),t}(r.a.Component),y=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.onLogOut()}},{key:"render",value:function(){return r.a.createElement(h.a,{to:"/login"})}}]),t}(r.a.Component),w=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={fields:{name:"",email:"",password:""}},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"onInputChange",value:function(e){this.setState({fields:Object(k.a)({},this.state.fields,Object(S.a)({},e.target.name,e.target.value))})}},{key:"onFormSubmit",value:function(e){var t=this;e.preventDefault(),E.signUp(this.state.fields).then(function(e){t.setState({fields:{name:"",email:"",password:""}}),e&&(t.props.onSignUpSuccess(e),t.props.history.push("/"))})}},{key:"render",value:function(){var e=this.state.fields,t=e.name,n=e.email,a=e.password;return r.a.createElement("div",{className:"SignUp"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column column-33 column-offset-33"},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onChange:this.onInputChange.bind(this),onSubmit:this.onFormSubmit.bind(this)},r.a.createElement("input",{type:"text",placeholder:"Name",name:"name",value:t}),r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",value:n}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",value:a}),r.a.createElement("button",null,"Sign Up")))))}}]),t}(r.a.Component),U=n(35),I=n.n(U),C=function(e){return r.a.createElement("div",{className:"VIP"},r.a.createElement("h1",null,"Welcome to Strategic Machines!"),r.a.createElement("img",{src:I.a,alt:"VIP"}))},N=function(e){return r.a.createElement("div",{className:"Home"},r.a.createElement("h1",null,"Strategic Machines"),r.a.createElement("h2",null,"Secure Messaging"),r.a.createElement("h3",null,"JSON Web Token Demo"))},L=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={currentUser:E.getCurrentUser()},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"onLoginSuccess",value:function(e){this.setState({currentUser:E.getCurrentUser()})}},{key:"logOut",value:function(){E.logOut(),this.setState({currentUser:null})}},{key:"render",value:function(){var e=this,t=this.state.currentUser;return r.a.createElement("div",{className:"App container"},r.a.createElement(O,{currentUser:t}),r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/login",render:function(t){return r.a.createElement(j,Object.assign({},t,{onLoginSuccess:e.onLoginSuccess.bind(e)}))}}),r.a.createElement(h.b,{path:"/logout",render:function(t){return r.a.createElement(y,{onLogOut:e.logOut.bind(e)})}}),r.a.createElement(h.b,{path:"/signup",render:function(t){return r.a.createElement(w,Object.assign({},t,{onSignUpSuccess:e.onLoginSuccess.bind(e)}))}}),r.a.createElement(h.b,{path:"/machine",render:function(){return t?r.a.createElement(C,null):r.a.createElement(h.a,{to:"/login"})}}),r.a.createElement(h.b,{path:"/",component:N})))}}]),t}(r.a.Component);l.a.render(r.a.createElement(c.a,null,r.a.createElement(L,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.4634403d.chunk.js.map